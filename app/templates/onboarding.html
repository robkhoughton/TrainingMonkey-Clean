<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Training Monkey - The Training Status Your Garmin Can't Show You</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Patent-pending training load divergence analysis for trail runners. Prevent injuries and optimize performance with insights your Garmin can't provide.">
    <meta name="keywords" content="trail running, training load, injury prevention, ACWR, training analysis, divergence, performance optimization">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Your Training Monkey - Smart Training Analysis for Trail Runners">
    <meta property="og:description" content="See your training divergence - the key insight missing from every other fitness platform">
    <meta property="og:url" content="{{ request.url }}">

    <!-- Favicon - Monkey Mascot -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('serve_landing_static', filename='images/monkey_700.jpg') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('serve_landing_static', filename='images/monkey_700.jpg') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('serve_landing_static', filename='images/monkey_700.jpg') }}">
    <link rel="shortcut icon" href="{{ url_for('serve_landing_static', filename='images/monkey_700.jpg') }}">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DP521017ER"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DP521017ER');
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #1f2937;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 4rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.95;
            font-weight: 300;
        }

        .header .description {
            font-size: 1.25rem;
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
        }

        /* Demo Section */
        .demo-section {
            background: #f8fafc;
            padding: 4rem 2rem;
            text-align: center;
        }

        .demo-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .demo-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .demo-subtitle {
            font-size: 1.25rem;
            color: #64748b;
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Divergence Chart Demo */
        .chart-demo {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .status-sweet-spot {
            background: #dcfce7;
            color: #166534;
        }

        .status-risk {
            background: #fee2e2;
            color: #991b1b;
        }

        .chart-container {
            position: relative;
            height: 300px;
            background: linear-gradient(to right, #fee2e2 0%, #fef3c7 25%, #dcfce7 50%, #fef3c7 75%, #fee2e2 100%);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .chart-zones {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: space-between;
            align-items: end;
            padding: 1rem;
        }

        .zone-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: #6b7280;
            text-align: center;
        }

        .divergence-line {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #3b82f6;
            transition: left 0.3s ease;
        }

        .divergence-point {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #3b82f6;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
        }

        .chart-axis {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding: 0 1rem;
        }

        .axis-label {
            font-size: 0.875rem;
            color: #64748b;
            font-weight: 500;
        }

        /* Interactive Demo Controls */
        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .demo-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            color: #475569;
        }

        .demo-btn:hover {
            border-color: #3b82f6;
            color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .demo-btn.active {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }

        .cta-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .cta-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .cta-description {
            font-size: 1.25rem;
            margin-bottom: 3rem;
            opacity: 0.9;
        }

        .strava-connect-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: #FC5200;
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.125rem;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(252, 82, 0, 0.3);
        }

        .strava-connect-btn:hover {
            background: #e04700;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(252, 82, 0, 0.4);
            color: white;
            text-decoration: none;
        }

        .strava-logo {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Value Propositions */
        .value-section {
            padding: 4rem 2rem;
            background: white;
        }

        .value-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .value-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-bottom: 4rem;
        }

        .value-item {
            text-align: center;
            padding: 2rem;
        }

        .value-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .value-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .value-description {
            color: #64748b;
            line-height: 1.8;
        }

        /* How It Works */
        .how-section {
            background: #f8fafc;
            padding: 4rem 2rem;
        }

        .how-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 3rem;
            color: #1e293b;
        }

        .how-steps {
            display: grid;
            gap: 2rem;
            text-align: left;
        }

        .step {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-left: 4px solid #3b82f6;
        }

        .step-number {
            display: inline-block;
            background: #3b82f6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 1rem;
        }

        .step-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1e293b;
        }

        .step-description {
            color: #64748b;
            line-height: 1.6;
        }

        /* Patent Section */
        .patent-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .patent-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 1rem;
            backdrop-filter: blur(10px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .header .subtitle {
                font-size: 1.25rem;
            }

            .demo-title {
                font-size: 2rem;
            }

            .chart-header {
                flex-direction: column;
                text-align: center;
            }

            .demo-controls {
                flex-direction: column;
                align-items: center;
            }

            .cta-title {
                font-size: 2rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Flash Messages */
        .flash-messages {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
        }

        .flash-message {
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            font-weight: 500;
            animation: fadeInUp 0.3s ease;
        }

        .flash-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .flash-danger {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
    </style>
</head>
<body>
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Header Section -->
    <section class="header">
        <div class="header-content fade-in">
            <h1>Your Training Monkey</h1>
            <p class="subtitle">The Training Status Your Garmin Can't Show You</p>
            <p class="description">Patent-pending divergence analysis reveals when your body and training are out of sync‚Äîthe key to training smart and avoiding injury.</p>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo-section">
        <div class="demo-container">
            <h2 class="demo-title">See Your Training Divergence</h2>
            <p class="demo-subtitle">This is what trail runners have been missing‚Äîa real-time view of how your training load matches your body's response.</p>

            <!-- Interactive Demo -->
            <div class="chart-demo">
                <div class="chart-header">
                    <h3 class="chart-title">Training Load Divergence</h3>
                    <div class="status-indicator status-sweet-spot" id="statusIndicator">
                        <span>‚óè</span> Sweet Spot
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-zones">
                        <div class="zone-label">High Risk</div>
                        <div class="zone-label">Caution</div>
                        <div class="zone-label">Sweet Spot</div>
                        <div class="zone-label">Caution</div>
                        <div class="zone-label">High Risk</div>
                    </div>
                    <div class="divergence-line" id="divergenceLine" style="left: 50%;"></div>
                    <div class="divergence-point" id="divergencePoint" style="left: 50%; top: 60%;"></div>
                </div>

                <div class="chart-axis">
                    <span class="axis-label">External Load Too High</span>
                    <span class="axis-label">Perfect Balance</span>
                    <span class="axis-label">Internal Load Too High</span>
                </div>
            </div>

            <!-- Demo Controls -->
            <div class="demo-controls">
                <button class="demo-btn active" onclick="showScenario('sweet-spot')">Optimal Training</button>
                <button class="demo-btn" onclick="showScenario('overreaching')">Overreaching</button>
                <button class="demo-btn" onclick="showScenario('undertrained')">Recovery Phase</button>
                <button class="demo-btn" onclick="showScenario('high-risk')">High Risk</button>
            </div>

            <!-- Scenario Description -->
            <div class="scenario-description" id="scenarioDescription">
                <p style="color: #64748b; font-style: italic; text-align: center; margin-top: 1rem;">
                    Perfect balance - train with confidence
                </p>
            </div>
            
            <p style="color: #64748b; font-style: italic; text-align: center; margin-top: 0.5rem;">
                Interactive demo‚Äîclick the scenarios above to see different training states
            </p>
        </div>
    </section>

    <!-- Value Propositions -->
    <section class="value-section">
        <div class="value-container">
            <div class="value-grid">
                <div class="value-item fade-in">
                    <div class="value-icon">üéØ</div>
                    <h3 class="value-title">Find Your Training Sweet Spot</h3>
                    <p class="value-description">Stop second-guessing whether to push hard or rest. Our algorithm shows you exactly when your body and training are in perfect harmony.</p>
                </div>

                <div class="value-item fade-in">
                    <div class="value-icon">üõ°Ô∏è</div>
                    <h3 class="value-title">Prevent Injuries Before They Happen</h3>
                    <p class="value-description">Catch dangerous training imbalances weeks before they become injuries. Train with confidence knowing your risk level in real-time.</p>
                </div>

                <div class="value-item fade-in">
                    <div class="value-icon">üèîÔ∏è</div>
                    <h3 class="value-title">Built for Trail Runners</h3>
                    <p class="value-description">First system designed specifically for elevation-demanding activities. Your 2,000ft climb finally counts for what it's worth.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="cta-container">
            <h2 class="cta-title">Ready to See YOUR Divergence?</h2>
            <p class="cta-description">Connect your Strava account and get instant access to training insights you can't find anywhere else. Free trial included.</p>

            <a href="{{ url_for('strava_auth') }}" class="strava-connect-btn" id="stravaConnectBtn" onclick="trackCTAClick()">
                <svg class="strava-logo" viewBox="0 0 24 24">
                    <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.172"/>
                </svg>
                Connect with Strava - See Your Divergence
            </a>

            <p style="margin-top: 1rem; opacity: 0.8; font-size: 0.95rem;">
                Need 28+ days of training data for complete analysis
            </p>
            
            <!-- Help Link -->
            <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.2);">
                <p style="margin-bottom: 1rem; opacity: 0.9; font-size: 1rem;">
                    Need help getting started?
                </p>
                <a href="/getting-started?source=onboarding" onclick="trackGettingStartedClick()" 
                   style="display: inline-block; background: rgba(255,255,255,0.1); color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 500; border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease; backdrop-filter: blur(10px);"
                   onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.borderColor='rgba(255,255,255,0.3)'"
                   onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.2)'">
                    View Getting Started Guide
                </a>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-section">
        <div class="how-container">
            <h2 class="section-title">How It Works</h2>

            <div class="how-steps">
                <div class="step fade-in">
                    <span class="step-number">1</span>
                    <h3 class="step-title">We Analyze Two Types of Training Load</h3>
                    <p class="step-description"><strong>External Load:</strong> The work you do (distance + elevation gain)<br>
                    <strong>Internal Load:</strong> How your body responds (heart rate patterns)</p>
                </div>

                <div class="step fade-in">
                    <span class="step-number">2</span>
                    <h3 class="step-title">Calculate the Divergence</h3>
                    <p class="step-description">Our patent-pending algorithm compares these loads using sophisticated ratios to reveal mismatches between what you're doing and how you're responding.</p>
                </div>

                <div class="step fade-in">
                    <span class="step-number">3</span>
                    <h3 class="step-title">Get Actionable Guidance</h3>
                    <p class="step-description">Receive clear recommendations: train hard when you're in the sweet spot, back off when divergence shows risk, recover when your body needs it most.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Patent Section -->
    <section class="patent-section">
        <div class="patent-badge">Patent Pending</div>
        <h2>Revolutionary Technology Available Nowhere Else</h2>
        <p>Our normalized divergence calculation is the first and only system that combines external and internal training loads specifically for trail runners. You literally cannot get this analysis from any other platform.</p>
    </section>

    <script>
        // Demo Scenarios
        const scenarios = {
            'sweet-spot': {
                position: 50,
                status: 'Sweet Spot',
                color: 'status-sweet-spot',
                description: 'Perfect balance - train with confidence'
            },
            'overreaching': {
                position: 25,
                status: 'Caution',
                color: 'status-risk',
                description: 'External load too high - consider easier training'
            },
            'undertrained': {
                position: 75,
                status: 'Recovery Phase',
                color: 'status-sweet-spot',
                description: 'Good recovery - ready for harder training'
            },
            'high-risk': {
                position: 15,
                status: 'High Risk',
                color: 'status-risk',
                description: 'Dangerous imbalance - rest recommended'
            }
        };

        function showScenario(scenarioKey) {
            const scenario = scenarios[scenarioKey];
            const line = document.getElementById('divergenceLine');
            const point = document.getElementById('divergencePoint');
            const statusIndicator = document.getElementById('statusIndicator');
            const scenarioDescription = document.getElementById('scenarioDescription');
            
            if (!scenario || !line || !point || !statusIndicator || !scenarioDescription) return;
            
            // Update divergence point position
            point.style.left = scenario.position + '%';
            
            // Update status indicator
            statusIndicator.className = 'status-indicator ' + scenario.color;
            statusIndicator.innerHTML = '<span>‚óè</span> ' + scenario.status;
            
            // Update scenario description
            scenarioDescription.innerHTML = '<p style="color: #64748b; font-style: italic; text-align: center; margin-top: 1rem;">' + scenario.description + '</p>';
            
            // Update button states
            document.querySelectorAll('.demo-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Add smooth transition
            point.style.transition = 'left 0.5s ease-in-out';
            statusIndicator.style.transition = 'all 0.3s ease-in-out';
            scenarioDescription.style.transition = 'opacity 0.3s ease-in-out';
            
            // Track demo interaction
            trackDemoInteraction(scenarioKey);
        }
        
        function trackDemoInteraction(scenarioKey) {
            fetch('/api/landing/analytics', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    event_type: 'demo_interaction',
                    event_data: {
                        scenario: scenarioKey,
                        source: 'onboarding',
                        timestamp: new Date().toISOString()
                    }
                })
            }).catch(e => console.log('Analytics tracking failed:', e));
        }

        function trackGettingStartedClick() {
            fetch('/api/landing/analytics', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    event_type: 'cta_click',
                    event_data: {
                        button: 'getting_started_guide',
                        source: 'onboarding',
                        timestamp: new Date().toISOString()
                    }
                })
            }).catch(e => console.log('Analytics tracking failed:', e));
        }